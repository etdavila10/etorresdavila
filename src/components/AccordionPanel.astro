---
/*
 * Accordion panel. Single element of an Accordion
 */

interface Props {
  title: string;
}

const { title } = Astro.props;
---

<div>
  <button class="accordion font-display before:content-['+'] before:float-left before:pr-3">{title}</button>
  <div class="max-h-0 overflow-hidden">
    <slot />
  </div>
</div>

<style>
  .active:before {
    content: "\2212";
  }
</style>

<script>
  let acc = document.getElementsByClassName("accordion");

  for (let i = 0; i < acc.length; i++) {
    acc[i].addEventListener("click", function () {
      let activeSections = document.getElementsByClassName("active");
      if (activeSections.length != 0 && !this.isEqualNode(activeSections[0])) {
        let activeSection = activeSections[0];
        activeSection.classList.toggle("active");
        let activePanel = activeSection.nextElementSibling;
        activePanel.style.maxHeight = null;
      }
      this.classList.toggle("active");
      let panel = this.nextElementSibling;
      if (panel.style.maxHeight) {
        panel.style.maxHeight = null;
      } else {
        panel.style.maxHeight = panel.scrollHeight + "px";
      }
    });
  }
</script>
